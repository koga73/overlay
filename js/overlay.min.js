/*
 * overlay v3.0.1 Copyright (c) 2020 AJ Savino
 * https://github.com/koga73/overlay
 * MIT License
 */
!function(){var d,S="Overlay",T=S.toLowerCase()+"-",e="beforeshow",t="aftershow",n="beforehide",r="afterhide",L={CLASS_CONTAINER:T+"container",CLASS_BACKGROUND:T+"background",CLASS_FRAME:T+"frame",CLASS_CLOSE:T+"close",CLASS_FRAME_VISIBLE:T+"visible",CLASS_BODY_VISIBLE:T+"visible",CLASS_CONTENT:T+"content",DATA_CONTAINER:"data-"+T+"container",DATA_PAGE_WRAP:"data-"+T+"page-wrap",DATA_TRIGGER:"data-"+T+"trigger",DATA_WIDTH:"data-"+T+"width",DATA_HEIGHT:"data-"+T+"height",DATA_OFFSET_X:"data-"+T+"offset-x",DATA_OFFSET_Y:"data-"+T+"offset-y",DATA_CONTAINER_CLASS:"data-"+T+"container-class",DATA_USER_CLOSABLE:"data-"+T+"user-closable",DATA_AUTO_FOCUS:"data-"+T+"auto-focus",DATA_IMMEDIATE:"data-"+T+"immediate",FOCUSABLE:"a[href],input,select,textarea,button,[tabindex]",DEFAULT_ARIA_LABEL:S},b=function(){for(var n=null,t=null,e=[["webkitTransition","webkitTransitionEnd","-webkit-"],["transition","transitionend",""]],r=e.length,i=0;i<r&&void 0===document.documentElement.style[e[i][0]];i++);return i!=r&&(n=e[i][1],t=e[i][2]),{hasTransition:function(e){return void 0!==document.documentElement.currentStyle?0<parseFloat(e.currentStyle[t+"transition-duration"]):0<parseFloat(window.getComputedStyle(e)[t+"transition-duration"])},onTransitionComplete:function(e,t){n?w.addEventListener(e,n,t):t()},offTransitionComplete:function(e,t){n&&(void 0!==t?w.removeEventListener(e,n,t):w.removeEventListener(e,n))}}}(),y=("function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),{addClass:function(e,t){var n,r=(e.getAttribute("class")||"").split(" ");for(n in t=t.split(" "))r.push(t[n].trim());e.setAttribute("class",r.join(" ").trim())},removeClass:function(e,t){var n,r=(e.getAttribute("class")||"").split(" ");for(n in t=t.split(" "))for(var i=r.length,a=0;a<i;a++)r[a]==t[n].trim()&&(r.splice(a,1),i--,a--);e.setAttribute("class",r.join(" ").trim())},hasClass:function(e,t){var n,r=(e.getAttribute("class")||"").split(" "),i=0;for(n in t=t.split(" "))for(var a=r.length,o=0;o<a;o++)if(r[o]==t[n].trim()){i++;break}return i==t.length}}),w={Event:(d={Event:function(t,e){var n=null;try{n=new CustomEvent(t,{detail:e})}catch(e){"undefined"!=typeof document&&document.createEventObject?(n=document.createEventObject("Event")).initCustomEvent&&n.initCustomEvent(t,!0,!0):n={}}return n.type=t,n.detail=e,n},addEvents:function(e,t){return t=!0===t,e._eventHandlers||(e._eventHandlers={}),e.addEventListener||(e.addEventListener=d._addEventListener,t||(e.on=d._addEventListener)),e.removeEventListener||(e.removeEventListener=d._removeEventListener,t||(e.off=d._removeEventListener)),e.dispatchEvent||(e.dispatchEvent=d._dispatchEvent,t||(e.trigger=d._dispatchEvent,e.emit=d._dispatchEvent)),e},removeEvents:function(e,t){return t=!0===t,e._eventHandlers&&delete e._eventHandlers,e.addEventListener&&(delete e.addEventListener,t||delete e.on),e.removeEventListener&&(delete e.removeEventListener,t||delete e.off),e.dispatchEvent&&(delete e.dispatchEvent,t||(delete e.trigger,delete e.emit)),e},addEventListener:function(e,t,n){if("string"!=typeof e){e._eventHandlers||(e._eventHandlers={});for(var r=(t=t.split(/,|\s/)).length,i=0;i<r;i++){var a,o=t[i];e.addEventListener?(n=d._addEventHandler(e,o,n),e.addEventListener(o,n)):e.attachEvent?((a=function(){n(window.event)}).handler=n,a=d._addEventHandler(e,o,a),e.attachEvent("on"+o,a)):"undefined"!=typeof jQuery?(n=d._addEventHandler(e,o,n),jQuery.on(o,n)):(e.addEventListener=d._addEventListener,e.addEventListener(o,n))}}},_addEventListener:function(e,t){t._isCustom=!0,d._addEventHandler(this,e,t)},_addEventHandler:function(e,t,n){e._eventHandlers[t]||(e._eventHandlers[t]=[]);for(var r=e._eventHandlers[t],i=r.length,a=0;a<i;a++){if(r[a]===n)return n;if(r[a].handler&&r[a].handler===n)return r[a]}return r.push(n),n},removeEventListener:function(e,t,n){if("string"!=typeof e){e._eventHandlers||(e._eventHandlers={});for(var r=(t=t.split(/,|\s/)).length,i=0;i<r;i++)for(var a=t[i],o=void 0===n?e._eventHandlers[a]||[]:[n],l=o.length,s=0;s<l;s++){n=o[s];e.removeEventListener?(n=d._removeEventHandler(e,a,n),e.removeEventListener(a,n)):e.detachEvent?(n=d._removeEventHandler(e,a,n),e.detachEvent("on"+a,n)):"undefined"!=typeof jQuery?(n=d._removeEventHandler(e,a,n),jQuery.off(a,n)):(e.removeEventListener=d._removeEventListener,e.removeEventListener(a,n))}}},_removeEventListener:function(e,t){for(var n=(e=e.split(/,|\s/)).length,r=0;r<n;r++)for(var i=e[r],a=void 0===t?this._eventHandlers[i]||[]:[t],o=a.length,l=0;l<o;l++)(t=a[l])._isCustom=!1,d._removeEventHandler(this,i,t)},_removeEventHandler:function(e,t,n){e._eventHandlers[t]||(e._eventHandlers[t]=[]);for(var r=e._eventHandlers[t],i=r.length,a=0;a<i;a++){if(r[a]===n)return r.splice(a,1)[0];if(r[a].handler&&r[a].handler===n)return r.splice(a,1)[0]}},dispatchEvent:function(e,t){e._eventHandlers||(e._eventHandlers={}),e.dispatchEvent?e.dispatchEvent(t):e.fireEvent?e.fireEvent("on"+type,t):"undefined"!=typeof jQuery?jQuery(e).trigger(jQuery.Event(t.type,{type:t.type,data:t.detail})):(e.dispatchEvent=d._dispatchEvent,e.dispatchEvent(t))},_dispatchEvent:function(e){d._dispatchEventHandlers(this,e)},_dispatchEventHandlers:function(e,t){var n=e._eventHandlers[t.type];if(n)for(var r=n.length,i=0;i<r;i++)n[i](t,t.detail)}}).Event,addEvents:d.addEvents,removeEvents:d.removeEvents,addEventListener:d.addEventListener,removeEventListener:d.removeEventListener,dispatchEvent:d.dispatchEvent},k={_singleton:null,_focusin_handlerStack:[],_keyup_handlerStack:[],_init:function(){var e,t=new window[S];for(e in t.init(),t)window[S][e]=t[e];k._singleton=t},_destory:function(){k._singleton&&k._singleton.destroy(),k._singleton=null},_update:function(){k._singleton&&(k._singleton.classPrefix=window[S].classPrefix,k._singleton.container=window[S].container,k._singleton.pageWrap=window[S].pageWrap,k._singleton.requestCloseCallback=window[S].requestCloseCallback)},_addFocusin:function(e){var t=k._focusin_handlerStack,n=t.length;t.push(e),n||w.addEventListener(document,"focusin",k._handler_document_focusin)},_removeFocusin:function(e){for(var t=k._focusin_handlerStack,n=t.length,r=0;r<n;r++)if(t[r]===e){t.splice(r,1);break}t.length||w.removeEventListener(document,"focusin",k._handler_document_focusin)},_handler_document_focusin:function(e){var t=k._focusin_handlerStack,n=t.length;n&&t[n-1].call(this,e)},_addKeyup:function(e){var t=k._keyup_handlerStack,n=t.length;t.push(e),n||w.addEventListener(document,"keyup",k._handler_document_keyup)},_removeKeyup:function(e){for(var t=k._keyup_handlerStack,n=t.length,r=0;r<n;r++)if(t[r]===e){t.splice(r,1);break}t.length||w.removeEventListener(document,"keyup",k._handler_document_keyup)},_handler_document_keyup:function(e){var t=k._keyup_handlerStack,n=t.length;n&&t[n-1].call(this,e)}};window[S]=function(){var m={classPrefix:null,container:null,pageWrap:null,requestCloseCallback:null,_initialized:!1,_scopeElement:null,_container:null,_background:null,_content:null,_frame:null,_close:null,_showCallback:null,_hideCallback:null,_lastFocus:null,_immediate:!1},C={init:function(e){void 0===e&&(e=document.body||null),k._update();var t=document.createElement("div"),n=g.classPrefix?L.CLASS_CONTAINER.replace(T,g.classPrefix):L.CLASS_CONTAINER;t.setAttribute("class",n),m._container=t;var r=document.createElement("div"),i=g.classPrefix?L.CLASS_BACKGROUND.replace(T,g.classPrefix):L.CLASS_BACKGROUND;r.setAttribute("class",i),m._background=r;var a=document.createElement("div"),n=g.classPrefix?L.CLASS_FRAME.replace(T,g.classPrefix):L.CLASS_FRAME;a.setAttribute("class",n),m._frame=a;i=document.createElement("button"),n=g.classPrefix?L.CLASS_CLOSE.replace(T,g.classPrefix):L.CLASS_CLOSE;if(i.setAttribute("class",n),i.setAttribute("type","button"),i.innerHTML="Close",m._close=i,a.appendChild(i),t.appendChild(r),t.appendChild(a),w.addEvents(g),e){(t=e.querySelector("["+L.DATA_CONTAINER+"]"))&&(g.container=t);t=e.querySelector("["+L.DATA_PAGE_WRAP+"]");t&&(g.pageWrap=t);for(var o=e.querySelectorAll("["+L.DATA_TRIGGER+"]"),l=o.length,s=0;s<l;s++)g.addTrigger(o[s])}m._scopeElement=e,m._initialized=!0},destroy:function(){m._initialized=!1,k._removeFocusin(C._handler_document_focusin),k._removeKeyup(C._handler_document_keyup);var e=g.classPrefix?L.CLASS_BODY_VISIBLE.replace(T,g.classPrefix):L.CLASS_BODY_VISIBLE;y.removeClass(m._scopeElement,e),C._focusRestore(),C._resetContent(),m._showCallback=null,m._hideCallback=null,m._lastFocus=!1,m._immediate=!1,w.removeEvents(g);e=m._close;e&&(w.removeEventListener(e,"click",C._handler_close_click),e.removeAttribute("disabled")),m._close=null,m._frame=null;e=m._background;e&&w.removeEventListener(e,"click",C._handler_background_click),m._background=null;e=m._container;e&&(e.setAttribute("class",""),e.parentNode&&e.parentNode.removeChild(e)),m._container=null;e=m._scopeElement;if(e)for(var t=e.querySelectorAll("["+L.DATA_TRIGGER+"]"),n=t.length,r=0;r<n;r++)g.removeTrigger(t[r]);m._scopeElement=null},addTrigger:function(e,t){if(t=t||null,!t)if(e.getAttribute(L.DATA_TRIGGER).length)t=e.getAttribute(L.DATA_TRIGGER);else{if(!e.hasAttribute("href"))throw new Error("Trigger must have "+L.DATA_TRIGGER+" or href");t=e.getAttribute("href")}w.addEventListener(e,"click",function(e){return void 0!==e.preventDefault?e.preventDefault():e.returnValue=!1,g.show(t),!1})},removeTrigger:function(e){w.removeEventListener(e,"click")},show:function(e,t,n){if(!m._initialized)throw new Error(S+" is not initialized. To fix call init()");k._update();var r="string"==typeof e;r&&-1!=e.indexOf("#")&&(e=e.replace(/.*#/,"")),void 0===t&&(t={}),m._showCallback=n;var i,a,o,l,s=g.classPrefix?L.CLASS_BODY_VISIBLE.replace(T,g.classPrefix):L.CLASS_BODY_VISIBLE;if(y.addClass(m._scopeElement,s),w.dispatchEvent(g,new w.Event(g.EVENT_BEFORE_SHOW,{content:e.id||e})),null==m._content){if(!(e=r?document.getElementById(e):e))throw new Error("Invalid content");var d,c="",_=!0,u=!1,s=!1;void 0!==t.width?i=t.width:(d=e.getAttribute(L.DATA_WIDTH))&&d.length&&(i=d),void 0!==t.height?a=t.height:(d=e.getAttribute(L.DATA_HEIGHT))&&d.length&&(a=d),void 0!==t.offsetX?o=t.offsetX:(E=e.getAttribute(L.DATA_OFFSET_X))&&E.length&&(o=E),void 0!==t.offsetY?l=t.offsetY:(f=e.getAttribute(L.DATA_OFFSET_Y))&&f.length&&(l=f),void 0!==t.containerClass?c=t.containerClass:(h=e.getAttribute(L.DATA_CONTAINER_CLASS))&&h.length&&(c=h),void 0!==t.userClosable?_=!0===t.userClosable:e.hasAttribute(L.DATA_USER_CLOSABLE)&&(_="false"!==(e.getAttribute(L.DATA_USER_CLOSABLE)||"true").toLowerCase()),void 0!==t.autoFocus?u=!0===t.autoFocus:e.hasAttribute(L.DATA_AUTO_FOCUS)&&(u="false"!==(e.getAttribute(L.DATA_AUTO_FOCUS)||"true").toLowerCase()),void 0!==t.immediate?s=!0===t.immediate:e.hasAttribute(L.DATA_IMMEDIATE)&&(s=(A=e.getAttribute(L.DATA_IMMEDIATE)||"true")&&"false"!==A.toLowerCase());var v=m._container,E=m._background,f=m._frame,h=m._close,A=g.classPrefix?L.CLASS_CONTENT.replace(T,g.classPrefix):L.CLASS_CONTENT;if(y.addClass(e,A),e.setAttribute("tabindex","0"),e.hasAttribute("aria-label")||e.hasAttribute("aria-labelledby")||e.setAttribute("aria-label",L.DEFAULT_ARIA_LABEL),e["_"+T+"data"]=e["_"+T+"data"]||{},void 0===i&&(i=(void 0!==document.documentElement.currentStyle?e.currentStyle:window.getComputedStyle(e)).width),parseInt(i)?(f.style.width=i,e["_"+T+"data"].width=i,e.style.width="100%"):f.style.width="",void 0===a&&(a=(void 0!==document.documentElement.currentStyle?e.currentStyle:window.getComputedStyle(e)).height),parseInt(a)?(f.style.height=a,e["_"+T+"data"].height=a,e.style.height="100%"):f.style.height="",f.style.left=void 0!==o?o:"",f.style.top=void 0!==l?l:"",m._content=e,_?(k._addKeyup(C._handler_document_keyup),w.addEventListener(E,"click",C._handler_background_click),w.addEventListener(h,"click",C._handler_close_click)):h.setAttribute("disabled","disabled"),e["_"+T+"data"].parent=e.parentNode,r&&e.parentNode.removeChild(e),f.insertBefore(e,h),!g.container){if(!m._scopeElement)throw new Error("Container is undefined");g.container=m._scopeElement}h=g.container;g.container.length&&(h=g.container[0]),h.appendChild(v),C._focusTrap(h,e,u),y.addClass(v,c);var p=setTimeout(function(){clearTimeout(p);var e=g.classPrefix?L.CLASS_FRAME_VISIBLE.replace(T,g.classPrefix):L.CLASS_FRAME_VISIBLE;y.addClass(v,e)},50);!(m._immediate=s)&&(b.hasTransition(E)||b.hasTransition(f))?(b.offTransitionComplete(v),b.onTransitionComplete(v,C._handler_show_complete)):C._handler_show_complete()}else g.hide(function(){g.show(e,t,n)})},hide:function(e){if(!m._initialized)throw new Error(S+" is not initialized. To fix call init()");m._hideCallback=e;var t=m._content;w.dispatchEvent(g,new w.Event(g.EVENT_BEFORE_HIDE,{content:t.id||t})),k._removeFocusin(C._handler_document_focusin),k._removeKeyup(C._handler_document_keyup);var n=m._close;n&&(w.removeEventListener(n,"click",C._handler_close_click),n.removeAttribute("disabled"));e=m._background;e&&w.removeEventListener(e,"click",C._handler_background_click);t=m._frame,n=m._container;n&&(!m._immediate&&(b.hasTransition(e)||b.hasTransition(t))?(b.offTransitionComplete(n),b.onTransitionComplete(n,C._handler_hide_complete)):C._handler_hide_complete(),t=g.classPrefix?L.CLASS_FRAME_VISIBLE.replace(T,g.classPrefix):L.CLASS_FRAME_VISIBLE,y.removeClass(n,t))},_focusTrap:function(e,t,n){n=!0===n,k._addFocusin(C._handler_document_focusin),m._lastFocus=document.activeElement;var r=g.pageWrap;if(r){if(r.contains(e))throw"Error: The page wrapper ["+L.DATA_PAGE_WRAP+"] should not contain the container. They should be siblings instead.";r.setAttribute("aria-hidden","true"),r.setAttribute("tabindex","-1")}((n?t.querySelector(L.FOCUSABLE):null)||t).focus()},_focusRestore:function(){k._removeFocusin(C._handler_document_focusin);var e=g.pageWrap;e&&(e.removeAttribute("aria-hidden","true"),e.removeAttribute("tabindex","-1"));e=m._lastFocus;e&&e.focus(),m._lastFocus=null},_resetContent:function(){var e,t=m._content;t&&(t.parentNode.removeChild(t),void 0!==(e=t["_"+T+"data"]).width&&(t.style.width=""),void 0!==e.height&&(t.style.height=""),void 0!==e.parent&&e.parent&&e.parent.appendChild(t),e=null,t.removeAttribute("tabindex"),e=g.classPrefix?L.CLASS_CONTENT.replace(T,g.classPrefix):L.CLASS_CONTENT,y.removeClass(t,e)),m._content=null},_handler_show_complete:function(){b.offTransitionComplete(m._container);var e=m._content;w.dispatchEvent(g,new w.Event(g.EVENT_AFTER_SHOW,{content:e.id||e}));e=m._showCallback;void 0!==e&&(e(),m._showCallback=null)},_handler_hide_complete:function(){var e=m._container;b.offTransitionComplete(e);var t=m._content;C._resetContent();var n=g.classPrefix?L.CLASS_CONTAINER.replace(T,g.classPrefix):L.CLASS_CONTAINER;e.setAttribute("class",n),e.parentNode.removeChild(e),C._focusRestore();e=g.classPrefix?L.CLASS_BODY_VISIBLE.replace(T,g.classPrefix):L.CLASS_BODY_VISIBLE;y.removeClass(m._scopeElement,e),w.dispatchEvent(g,new w.Event(g.EVENT_AFTER_HIDE,{content:t.id||t}));t=m._hideCallback;void 0!==t&&(t(),m._hideCallback=null)},_handler_close_click:function(e){return void 0!==e.preventDefault?e.preventDefault():e.returnValue=!1,C._requestClose(),!1},_handler_background_click:function(e){return void 0!==e.preventDefault?e.preventDefault():e.returnValue=!1,C._requestClose(),!1},_handler_document_keyup:function(e){27==e.keyCode&&C._requestClose()},_requestClose:function(){var e;g.requestCloseCallback?(e=m._content,!1!==(e=g.requestCloseCallback(e.id||e))&&0!==e&&g.hide()):g.hide()},_handler_document_focusin:function(e){var t=e.target||e.srcElement,n=m._frame;t==n||n.contains(t)||(void 0!==e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,(e=m._content)&&e.focus())}},g={EVENT_BEFORE_SHOW:e,EVENT_AFTER_SHOW:t,EVENT_BEFORE_HIDE:n,EVENT_AFTER_HIDE:r,classPrefix:m.classPrefix,container:m.container,pageWrap:m.pageWrap,requestCloseCallback:m.requestCloseCallback,init:C.init,destroy:C.destroy,show:C.show,hide:C.hide,addTrigger:C.addTrigger,removeTrigger:C.removeTrigger};return g},k._init()}();